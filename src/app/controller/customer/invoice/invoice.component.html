<div class="invoice-container" id="invoice" *ngIf="order">
  <div class="invoice-header">
    <h2>üßæ Invoice</h2>
    <div class="invoice-meta">
      <p><strong>Order Code:</strong> {{ order.orderCode }}</p>
      <p><strong>Date:</strong> {{ order.date | date : "medium" }}</p>
      <p><strong>Name:</strong> {{ order.customerName }}</p>
      <p><strong>Phone:</strong> {{ order.phone }}</p>
      <p>
        <strong>Payment Method:</strong>
        {{
          order.paymentMethod === "cod"
            ? "Cash on Delivery"
            : order.paymentMethod === "card"
            ? "Card Payment (Paid)"
            : order.paymentMethod === "mobile" && order.mobileType
            ? order.mobileType + " (Paid)"
            : "Unknown"
        }}
      </p>
      <p><strong>Address:</strong> {{ order.address }}</p>
    </div>
  </div>

  <table class="invoice-table">
    <thead>
      <tr>
        <th>#</th>
        <th>Product</th>
        <th>Qty</th>
        <th>Unit Price</th>
        <th>Total</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let item of order.items; let i = index">
        <td>{{ i + 1 }}</td>
        <td>{{ item.name }}</td>
        <td>{{ item.quantity }}</td>
        <td>‡ß≥{{ item.price }}</td>
        <td>‡ß≥{{ item.quantity * item.price }}</td>
      </tr>
    </tbody>
  </table>

  <div class="invoice-summary">
    <p><strong>Subtotal:</strong> ‡ß≥{{ order.subtotal }}</p>
    <!-- <p><strong>VAT (15%):</strong> ‡ß≥{{ order.vat }}</p> -->
    <p><strong>VAT (15%):</strong> ‡ß≥{{ order.vat | number : "1.2-2" }}</p>
    <p><strong>Delivery Fee:</strong> ‡ß≥{{ order.deliveryFee }}</p>
    <p class="grand-total">
      <strong>Grand Total:</strong> ‡ß≥{{ order.total | number : "1.2-2" }}
    </p>
  </div>

  <div class="invoice-actions">
    <button (click)="printInvoice()">üñ®Ô∏è Print</button>
    <button (click)="downloadPDF()">üìÑ Download PDF</button>
  </div>
</div>
